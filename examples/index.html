
<html>

<head>

 	<script src="../bower_components/kiwi.js/build/kiwi.js"></script>
 	<script src="../lib/particlesgl-0.9.0.js"></script>
  	<script src="../src/_particlepack1.js"></script>
  	<script src="../src/bam.js"></script>
  	<script src="../src/boom.js"></script>
  	<script src="../src/explosion.js"></script>
  	<script src="../src/fireworks.js"></script>
  	<script src="../src/gasfire.js"></script>
  	<script src="../src/hitlines.js"></script>
  	<script src="../src/kaboom.js"></script>
  	<script src="../src/poison.js"></script>
  	<script src="../src/poof.js"></script>
  	<script src="../src/pow.js"></script>
  	<script src="../src/smoke.js"></script>
  	<script src="../src/smokepuffs.js"></script>
  	<script src="../src/stars.js"></script>
  	<script src="../src/tornado.js"></script>
  	<script src="../src/zap.js"></script>

  	<script src="../src/bluefire.js"></script>
  	<script src="../src/gasleak.js"></script>
  	<script src="../src/orangefire.js"></script>
  	<script src="../src/redfire.js"></script>
  	<script src="../src/lightning.js"></script>


  
</head>
<body>
	<div id="exampleGameContainer">

	</div>
	<div>
	<select id="selectEffect">
	  <option value="bam">Bam</option>
	  <option value="boom">Boom</option>
	  <option value="explosion">Explosion</option>
	  <option value="fireworks">Fireworks</option>
	  <option value="gasfire">Gasfire</option>
	  <option value="hitlines">Hitlines</option>
	  <option value="kaboom">Kaboom</option>
	  <option value="poison">Poison</option>
	  <option value="poof">Poof</option>
	  <option value="pow">Pow</option>
	  <option value="smoke">Smoke</option>
	  <option value="smokepuffs">Smokepuffs</option>
	  <option value="stars">Stars</option>
	  <option value="tornado">Tornado</option>
	  <option value="zap">Zap</option>
	  <option value="bluefire">Bluefire</option>
	  <option value="orangefire">Orangefire</option>
	  <option value="redfire">Redfire</option>
	  <option value="lightning">Lightning</option>
	  <option value="gasleak">Gasleak</option>
	</select>
	</div>

	<select id="looping">
	  <option value="once">Once</option>
	  <option value="continuous">Continuous Loop</option>
	  <option value="loopAndPause">Loop and Pause</option>

	</select>

	<input id="go" type="button" value="go"/>

	<script type="text/javascript">

		function getParameterByName(name) {
		    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
		        results = regex.exec(location.search);
		    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}

		var selectEffect = document.getElementById("selectEffect");
		selectEffect.value = getParameterByName("name") || "gasfire";
		var looping = document.getElementById("looping");
		looping.value = getParameterByName("looping") || "loopAndPause";
		var go = document.getElementById("go");

		go.onclick = function (e) {
			console.log (selectEffect.value)
			console.log (looping.value)
			window.location = window.location.origin + window.location.pathname + "?name=" + selectEffect.value + "&looping=" + looping.value;

		}

		var MyState = new Kiwi.State("myState");
		
		var MyGame = new Kiwi.Game("exampleGameContainer","testGame",MyState,{renderer:Kiwi.RENDERER_WEBGL,plugins:["ParticlePack1","ParticlesGL"]});

		MyState.preload = function() {
			this.game.stage.color="000000";
    		this.addSpriteSheet('particlePack1SpriteSheet', '../assets/particlepack1_128.png',128, 128, true, 8, 5, 5, 27, 27, 54, 54);
    		this.addSpriteSheet('particlePack1SpriteSheet_16', '../assets/particlepack1_16.png', 16, 16, true, 8, 5, 5, 4, 4, 8, 8);
    		
		};

		MyState.create = function() {
			//single particle effects - these return a gameobject
			this.explosion = Kiwi.Plugins.ParticlePack1.Explosion(this,400,300);
    		this.gasfire = Kiwi.Plugins.ParticlePack1.Gasfire(this,400,300);
    		this.hitlines = Kiwi.Plugins.ParticlePack1.Hitlines(this,400,300);
    		this.kaboom = Kiwi.Plugins.ParticlePack1.Kaboom(this,400,300);
    		this.poison = Kiwi.Plugins.ParticlePack1.Poison(this,400,300);
    		this.smoke = Kiwi.Plugins.ParticlePack1.Smoke(this,400,300);
    		this.smokepuffs = Kiwi.Plugins.ParticlePack1.Smokepuffs(this,400,300);
    		this.stars = Kiwi.Plugins.ParticlePack1.Stars(this,400,300);
    		this.tornado = Kiwi.Plugins.ParticlePack1.Tornado(this,400,300);
    		this.bluefire = Kiwi.Plugins.ParticlePack1.Bluefire(this,400,300);
			this.orangefire = Kiwi.Plugins.ParticlePack1.Orangefire(this,400,300);
			this.redfire = Kiwi.Plugins.ParticlePack1.Redfire(this,400,300);
			

			//multiple particle effects - these return a group
			this.bam = Kiwi.Plugins.ParticlePack1.Bam(this,400,300);
    		this.boom = Kiwi.Plugins.ParticlePack1.Boom(this,400,300);
    		this.fireworks = Kiwi.Plugins.ParticlePack1.Fireworks(this,400,300);
    		this.poof = Kiwi.Plugins.ParticlePack1.Poof(this,400,300);
    		this.pow = Kiwi.Plugins.ParticlePack1.Pow(this,400,300);
    		this.zap = Kiwi.Plugins.ParticlePack1.Zap(this,400,300);
    		this.gasleak = Kiwi.Plugins.ParticlePack1.Gasleak(this,400,300);
			this.lightning = Kiwi.Plugins.ParticlePack1.Lightning(this,400,300);

    		var effectName = getParameterByName('name') || 'gasfire';
    		var effect = this[effectName];
    		var looping = getParameterByName('looping') || 'loopAndPause';
    		
    		
    		this.addChild(effect);



    		function start() {

	    		if (effect.childType() === Kiwi.GROUP) {
	    			for (var i = 0;i < effect.members.length;i++ ) {
	    				console.log(i);
	    				switch (looping) {
	    					case "once" : 
	    						effect.members[i].startEmitting(false);
	    						break;
	    					case "continuous" :
	    						effect.members[i].startEmitting();
	    						break;
	    					case "loopAndPause" :
	    						effect.members[i].startEmitting(false,false);
	    						break;
		   				}
	    			}				

	    		} else {
	    			switch (looping) {
		    			case "once" : 
							effect.startEmitting(false);
							break;
						case "continuous" :
							effect.startEmitting();
							break;
						case "loopAndPause" :
							effect.startEmitting(false,false);
							break;
	    			}
	    		}

    		}

    		start();
    		if (looping === "loopAndPause") {
    			
    			setInterval(start,5000);

    		}	
		}	

	</script>

</body>

</html>